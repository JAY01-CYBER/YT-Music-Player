name: Build Android APK

on:
  release:
    types: [published]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
        
    - name: Install dependencies
      run: |
        npm install
        npm install -g @expo/cli
        
    - name: Create APK Build Script
      run: |
        cat > build-app.sh << 'EOF'
        #!/bin/bash
        echo "ðŸŽµ Building YT Music Player..."
        
        # Create simple APK info since full build needs Expo account
        mkdir -p apk-build
        cat > apk-build/README.txt << 'EOM'
        YT Music Player APK Build
        
        Due to Expo build requirements, please build manually:
        
        1. Install Termux and Node.js
        2. Run: git clone https://github.com/JAY01-CY/YT-Music-Player
        3. Run: cd YT-Music-Player && npm install
        4. Run: npx expo start
        5. Scan QR code with Expo Go app
        
        Or build APK manually with Expo account:
        npx expo build:android
        
        App Features:
        - Search any song on YouTube
        - Popular Hindi songs
        - Beautiful UI
        EOM
        
        echo "ðŸ“± Build instructions created!"
        EOF
        
        chmod +x build-app.sh
        ./build-app.sh
        
    - name: Upload Build Instructions
      uses: actions/upload-artifact@v4
      with:
        name: yt-music-player-build
        path: |
          apk-build/
        retention-days: 30
